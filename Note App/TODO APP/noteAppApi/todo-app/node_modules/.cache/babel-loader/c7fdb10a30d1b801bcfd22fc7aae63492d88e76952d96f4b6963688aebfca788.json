{"ast":null,"code":"import'./App.css';import React,{Component}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default class App extends Component{constructor(props){super(props);this.state={todoList:[],activateItem:{id:null,title:'',completed:false},editing:false};this.fetchTask=this.fetchTask.bind(this);this.handleChange=this.handleChange.bind(this);this.handleSubmit=this.handleSubmit.bind(this);this.getCookie=this.getCookie.bind(this);this.strikeUnstrike=this.strikeUnstrike.bind(this);}getCookie(name){let cookieValue=null;if(document.cookie&&document.cookie!==''){const cookies=document.cookie.split(';');for(let i=0;i<cookies.length;i++){const cookie=cookies[i].trim();// Does this cookie string begin with the name we want?\nif(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}strikeUnstrike(task){task.completed=!task.completed;var csrf=this.getCookie('csrftoken');var urls=\"http://127.0.0.1:8000/update-task/\".concat(task.id);fetch(urls,{method:\"POST\",headers:{'content-type':'application/json','X-CSRFToken':csrf},body:JSON.stringify({'completed':task.completed,'title':task.title})}).then(()=>{this.fetchTask();});console.log('TASK',task.completed);}componentDidMount(){this.fetchTask();}fetchTask(){console.log(\"fetching.\");fetch(\"http://127.0.0.1:8000/\").then(Response=>Response.json()).then(data=>this.setState({todoList:data}));}handleChange(e){// var name = e.target.name\nvar value=e.target.value;// console.log(name)\n// console.log(value)\nthis.setState({activateItem:{...this.state.activateItem,title:value}});}deleteItem(task){var csrf=this.getCookie('csrftoken');fetch(\"http://127.0.0.1:8000/task-delete/\".concat(task.id),{method:'DELETE',headers:{'content-type':\"application.json\",'X-CSRFToken':csrf}}).then(response=>{this.fetchTask();});}handleSubmit(e){e.preventDefault();// console.log('Item', this.state.activateItem)\nvar url='http://127.0.0.1:8000/create-task/';var csrf=this.getCookie('csrftoken');if(this.state.editing===true){url=\"http://127.0.0.1:8000/update-task/\".concat(this.state.activateItem.id);this.setState({editing:false});}fetch(url,{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrf},body:JSON.stringify(this.state.activateItem)}).then(response=>{this.fetchTask();this.setState({activateItem:{...this.state.activateItem,title:\"\",id:null,completed:false}});}).catch(function(error){console.log('ERROR:',error);});console.log(this.state.activateItem);}startEdit(task){this.setState({activateItem:task,editing:true});}render(){var tasks=this.state.todoList;var self=this;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto shadow-lg mt-5\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"form\",className:\"p-2\",onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:this.handleChange,className:\"form-control p-2 mt-5\",id:\"title\",value:this.state.activateItem.title,placeholder:\"Enter text\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger mt-5 mb-5  \",children:\"SUBMIT\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto shadow-lg mt-5\",children:/*#__PURE__*/_jsx(\"div\",{id:\"list-wrapper\",className:\"p-3\",children:tasks.map(function(task,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"task-wrapper flex-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:7},onClick:()=>self.strikeUnstrike(task),children:task.completed===false?/*#__PURE__*/_jsx(\"h5\",{className:\"mt-1\",children:task.title}):/*#__PURE__*/_jsx(\"strike\",{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mt-1\",children:task.title})})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>self.startEdit(task),className:\"btn btn-primary \",children:\"EDIT\"})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>self.deleteItem(task),className:\"btn btn-dark\",children:\"-\"})})]},index);})})})]})});}}","map":{"version":3,"names":["React","Component","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","constructor","props","state","todoList","activateItem","id","title","completed","editing","fetchTask","bind","handleChange","handleSubmit","getCookie","strikeUnstrike","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","task","csrf","urls","concat","fetch","method","headers","body","JSON","stringify","then","console","log","componentDidMount","Response","json","data","setState","e","value","target","deleteItem","response","preventDefault","url","catch","error","startEdit","render","tasks","self","children","className","onSubmit","type","onChange","placeholder","map","index","style","flex","onClick"],"sources":["/home/bunny/Documents/Note App/TODO APP/noteAppApi/todo-app/src/App.js"],"sourcesContent":["\nimport './App.css';\n\nimport React, { Component } from 'react'\n\nexport default class App extends Component {\n\n  constructor(props){\n    super(props);\n\n      this.state={\n        todoList:[],\n        activateItem:{\n          id:null,\n          title:'',\n          completed:false\n        },\n        editing:false,\n      }\n\n      this.fetchTask = this.fetchTask.bind(this)\n      this.handleChange = this.handleChange.bind(this)\n      this.handleSubmit = this.handleSubmit.bind(this)\n      this.getCookie = this.getCookie.bind(this)\n      this.strikeUnstrike = this.strikeUnstrike.bind(this)\n  };\n\n  getCookie(name) {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== '') {\n        const cookies = document.cookie.split(';');\n        for (let i = 0; i < cookies.length; i++) {\n            const cookie = cookies[i].trim();\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n  }\n\n  strikeUnstrike(task){\n    task.completed = !task.completed\n    var csrf = this.getCookie('csrftoken')\n    var urls = `http://127.0.0.1:8000/update-task/${task.id}`\n\n    fetch(urls,{\n      method:\"POST\",\n      headers:{\n        'content-type':'application/json',\n        'X-CSRFToken': csrf,\n      },\n      body:JSON.stringify({'completed': task.completed, 'title': task.title})\n    }).then(()=>{\n      this.fetchTask()\n    })\n    console.log('TASK', task.completed)\n  }\n\n  componentDidMount(){\n    this.fetchTask()\n  }\n\n  fetchTask(){\n    console.log(\"fetching.\")\n    fetch(\"http://127.0.0.1:8000/\")\n    .then(Response => Response.json())\n    .then(data => \n      this.setState({\n        todoList:data\n      })\n      )\n  }\n\n  handleChange(e){\n    // var name = e.target.name\n    var value = e.target.value\n    // console.log(name)\n    // console.log(value)\n    this.setState({\n      activateItem:{\n        ...this.state.activateItem,\n        title:value\n      }\n    })\n  }\n\n  deleteItem(task){\n    var csrf = this.getCookie('csrftoken')\n    \n    fetch(`http://127.0.0.1:8000/task-delete/${task.id}`,{\n      method:'DELETE',\n      headers:{\n        'content-type':\"application.json\",\n        'X-CSRFToken':csrf,\n      },\n    }).then((response)=>{\n      this.fetchTask()\n    })\n  }\n\n\n  handleSubmit(e){\n    e.preventDefault()\n    // console.log('Item', this.state.activateItem)\n    var url = 'http://127.0.0.1:8000/create-task/'\n\n    var csrf = this.getCookie('csrftoken')\n\n    if (this.state.editing === true){\n      url = `http://127.0.0.1:8000/update-task/${this.state.activateItem.id}`\n      this.setState({\n        editing:false\n      })\n    }\n\n    fetch(url, {\n      method:'POST',\n      headers:{\n        'Content-type':'application/json',\n        'X-CSRFToken': csrf\n      },\n      body:JSON.stringify(this.state.activateItem)\n    }).then((response)  => {\n        this.fetchTask()\n\n        this.setState({\n          activateItem:{\n            ...this.state.activateItem,\n            title:\"\",\n            id : null,\n            completed : false\n          }\n        })\n    }).catch(function(error){\n      console.log('ERROR:', error)\n    })\n    console.log(this.state.activateItem)\n  }\n\n  startEdit(task){\n    this.setState({\n      activateItem:task,\n      editing:true,\n    })\n  }\n\n  render() {\n    var tasks = this.state.todoList\n    var self = this\n    return (\n      <div>\n        <>\n          <div className=\"container mx-auto shadow-lg mt-5\">\n            <form id='form' className='p-2' onSubmit={this.handleSubmit}>\n              <div className=\"form\">\n                <input type=\"text\" onChange={this.handleChange} className=\"form-control p-2 mt-5\" id=\"title\" value={this.state.activateItem.title} placeholder=\"Enter text\"/>\n              </div>\n              <button type=\"submit\" className=\"btn btn-danger mt-5 mb-5  \">SUBMIT</button>\n            </form>\n          </div>\n          <div className=\"container mx-auto shadow-lg mt-5\">\n            <div id=\"list-wrapper\" className='p-3'>\n              {\n                tasks.map(function(task, index){\n                  return(\n                    <div key={index} className='task-wrapper flex-wrapper' >\n                      <div style={{flex:7}} onClick={() => self.strikeUnstrike(task)}>\n                        {task.completed === false ? (\n                          <h5 className='mt-1'>{task.title}</h5>\n                        ): (\n                          <strike><h5 className='mt-1'>{task.title}</h5></strike>\n                        )}\n                      </div>\n                      <div style={{flex:1}}>\n                        <button onClick={() => self.startEdit(task)} className='btn btn-primary '>EDIT</button>\n                      </div>\n                      <div style={{flex:1}}>\n                        <button onClick={()=> self.deleteItem(task)} className='btn btn-dark'>-</button>\n                      </div>\n                    </div>\n                  )\n                })\n              }\n            </div>\n          </div>\n        </>\n      </div>\n    )\n  }\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}